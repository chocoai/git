<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
	<title>系统审计日志</title>
	<meta http-equiv="X-UA-Compatible" content="IE=edge" >
	<meta http-equiv="content-type" content="text/html; charset=UTF-8" />
    <script src="#(g_path)/js/sys/common.js" type="text/javascript"></script>
	<style type="text/css">
	    body,html {
			width: 100%;
			height: 100%;
			padding: 0px;
			margin: 0px;
			overflow: hidden;
		}
		.lableright{
			width: 80px;
			text-align: right;
		}
	</style>  

  </head>
  <body>
  	<div style="padding:3px 5px;border-bottom:0;">
  		<table border="0" cellpadding="1" cellspacing="2" style="width:100%;table-layout:fixed;">
		    <tr>
		        <td class="lableright"> 日志类型：</td>
		        <td style="width:120px">
		            <input id="cbLogtype" class="mini-combobox" style="width:100%;" showNullItem="true"
		            	url="#(g_path)/sys/dict/getlist?sortcode=lp.logtype"
		             />
		        </td>
		        <td class="lableright"> 日志内容：</td>
		        <td style="width:120px">
		            <input id="txtInfo" class="mini-textbox" style="width:100%;" />
		        </td>
		        <td>
		        	
		        </td>
		    </tr>
		    <tr>
		        <td class="lableright"> 操作时间：</td>
		        <td>
		        	<input id="dpStartTime" class="mini-datepicker" value="" style="width:100%;"/>
		        </td>
		        <td style="text-align: center;">		             
		            ~ 
		        </td>
		        <td>

		            <input id="dpEndTime" class="mini-datepicker" value="" style="width:100%;"/>
		        </td>
		        <td style="padding-left: 8px">
		            <a class="mini-button " iconCls="icon-search" onclick="onSearch();">查询</a>
		        </td>
		    </tr>
		    
		    
		</table>
    </div>
    <!--撑满页面-->
    <div class="mini-fit" >

        <div id="datagrid1" class="mini-datagrid" style="width:100%;height:100%;" fitColumns="true"
            url="#(g_path)/sys/log/list"  idField="id" sizeList="[30,50,100,500]" pageSize="50"
            allowCellEdit="true" allowCellSelect="true" multiSelect="true"
        >
            <div property="columns">
                <div type="checkcolumn" ></div>
                <div type="indexcolumn" ></div>
                <div field="logtype" width="100"  headerAlign="center" align="center" allowSort="false">日志类型 </div> 
                <div field="info"  width="100%" headerAlign="center" align="center" allowSort="false">日志内容 </div>
                <div field="status" width="100"  headerAlign="center" align="center" allowSort="false">操作状态</div>
                <div field="username" width="100"  headerAlign="center" align="center" allowSort="false">操作用户</div>
                <div field="ip" width="120"  headerAlign="center" align="center" allowSort="false">操作IP</div>
                <div field="addtime" width="150" dateFormat="yyyy-MM-dd HH:mm:ss" headerAlign="center" align="center" allowSort="false">操作时间</div> 
            </div>
        </div> 

    </div>
</body>
</html>
<script type="text/javascript">
    mini.parse();
    var grid = mini.get("datagrid1");
	onSearch();

    function onSearch() {
    	var param ={
    		logtype : mini.get("cbLogtype").getValue(),
    		info : mini.get("txtInfo").getValue(),
    		time1 : mini.get("dpStartTime").getFormValue(),
    		time2 : mini.get("dpEndTime").getFormValue()
    	}
        grid.load(param);
    }

</script>
